function create(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b}function getClassElement(a){var b,c=document.getElementsByTagName("*"),d=[],e=0;for(b in c)(" "+c[b].className+" ").indexOf(" "+a+" ")>-1&&(d[e]=c[b],e++);return d}function highlightButton(a){var b=a.getElementsByTagName("li")[0];b.className="used"}function unHightlightButton(a){var b=a.getElementsByTagName("li")[0];b.className=""}function createDocumentShadow(){var a=document.createElement("div");a.id="monkeyBackground",document.body.appendChild(a)}function openDialogBox(a){for(var b=0;b<tools.length;b++){var c=tools[b].name;if(c==a.id){var d=c+"-dialog";document.getElementById("monkeyBackground").style.display="block",fadeIn(document.getElementById("monkeyBackground")),document.getElementById(d).style.display="block",fadeIn(document.getElementById(d)),showDialogButtonSubmit(a),showDialogButtonClose(a),pasteHtmlAtCaret("%MONKEY-INSERT-LOC%");break}}}function showDialogButtonSubmit(a){var b=a.id+"-submit";document.getElementById(b).style.display="block"}function dialogButtonSubmit(a,b){var c=a.id+"-submit",d=document.getElementById(c);d.onclick=function(){"none"!==d.style.display&&(d.style.display="none",closeDocumentShadow(),closeDialogBox(a),b&&"function"==typeof b&&b())}}function showDialogButtonClose(a){var b=a.id+"-close";document.getElementById(b).style.display="block"}function dialogButtonClose(a,b){var c=a.id+"-close",d=document.getElementById(c);d.onclick=function(){"none"!==d.style.display&&(d.style.display="none",insertHTMLToEditor(""),closeDocumentShadow(),closeDialogBox(a),b&&"function"==typeof b&&b())}}function closeDocumentShadow(){document.getElementById("monkeyBackground").style.display="none"}function closeDialogBox(a){var b=a.id+"-dialog";document.getElementById(b).style.display="none"}function dialogContent(a,b){var c,d=a.id+"-dialog",e=document.getElementById(d);b&&"function"==typeof b&&(c=b()),void 0!==c&&e.appendChild(c)}function fadeIn(a){a.style.opacity=0;var b=+new Date,c=function(){a.style.opacity=+a.style.opacity+(new Date-b)/400,b=+new Date,+a.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}function RememberLastEditable(a){a.addEventListener("click",function(){selectedInlineClassElement=a})}function insertHTMLToEditor(a){var b=selectedInlineClassElement.innerHTML.trim(),c=b.replace("%MONKEY-INSERT-LOC%",a);selectedInlineClassElement.innerHTML=c}function pasteHtmlAtCaret(a){var b,c;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=document.createElement("div");d.innerHTML=a;for(var e,f,g=document.createDocumentFragment();e=d.firstChild;)f=g.appendChild(e);c.insertNode(g),f&&(c=c.cloneRange(),c.setStartAfter(f),c.collapse(!0),b.removeAllRanges(),b.addRange(c))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(a)}function removeTags(a){var b=document.createElement("div");return b.innerHTML=a,b.innerText}function insertAfter(a,b){b.parentNode.insertBefore(a,b.nextSibling)}function bold(){var a=document.getElementById("monkeyInline-bold");a.onclick=function(){document.execCommand("bold")};var b=document.queryCommandState("bold");b===!0?highlightButton(a):unHightlightButton(a)}function clearFormatting(){var a=document.getElementById("monkeyInline-clearFormatting");a.onclick=function(){document.execCommand("removeFormat"),document.execCommand("formatBlock",!1,"<p>")}}function heading1(){var a=document.getElementById("monkeyInline-heading1");a.onclick=function(){document.execCommand("formatBlock",!1,"<h1>")}}function heading2(){var a=document.getElementById("monkeyInline-heading2");a.onclick=function(){document.execCommand("formatBlock",!1,"<h2>")}}function heading3(){var a=document.getElementById("monkeyInline-heading3");a.onclick=function(){document.execCommand("formatBlock",!1,"<h3>")}}function insertImage(){var a=document.getElementById("monkeyInline-image");a.onclick=function(){openDialogBox(a)},dialogButtonSubmit(a,function(){var a=document.getElementById("monkey-inline-image-src").value,b=document.getElementById("monkey-inline-image-alt").value,c=document.getElementById("monkeyInline-image-width").value,d=document.getElementById("monkeyInline-image-height").value,e="<img src='"+a+"' alt='"+b+"' width='"+c+"' height='"+d+"'/>";insertHTMLToEditor(e)}),dialogButtonClose(a)}function dialogImageContent(){var a=document.getElementById("monkeyInline-image");dialogContent(a,function(){var a=document.createElement("div"),b=document.createElement("label"),c=document.createTextNode("Image Link");b.appendChild(c);var d=document.createElement("input");d.type="text",d.id="monkey-inline-image-src";var e=document.createElement("label"),f=document.createTextNode("Alt");e.appendChild(f);var g=document.createElement("input");g.type="text",g.id="monkey-inline-image-alt";var h=document.createElement("label"),i=document.createTextNode("Width");h.appendChild(i);var j=document.createElement("input");j.type="text",j.id="monkeyInline-image-width";var k=document.createElement("label"),l=document.createTextNode("Height");k.appendChild(l);var m=document.createElement("input");return m.type="text",m.id="monkeyInline-image-height",a.appendChild(b),a.appendChild(d),a.appendChild(e),a.appendChild(g),a.appendChild(h),a.appendChild(j),a.appendChild(k),a.appendChild(m),a})}function italic(){var a=document.getElementById("monkeyInline-italic");a.onclick=function(){document.execCommand("italic")};var b=document.queryCommandState("italic");b===!0?highlightButton(a):unHightlightButton(a)}function createLink(){var a=document.getElementById("monkeyInline-link");a.onclick=function(){openDialogBox(a)},dialogButtonSubmit(a,function(){var a=document.getElementById("monkey-inline-insert-link-input").value,b=document.getElementById("monkey-inline-insert-link-name-input").value,c=document.getElementById("monkeyInline-link-target").value,d="<a href='"+a+"' target='"+c+"'>"+b+"</a>";insertHTMLToEditor(d)}),dialogButtonClose(a)}function dialogLinkContent(){var a=document.getElementById("monkeyInline-link");dialogContent(a,function(){var a=document.createElement("div"),b=document.createElement("label"),c=document.createTextNode("Target:");b.appendChild(c);var d=document.createElement("select"),e=document.createElement("option");e.value="_blank",e.innerHTML="_blank",d.appendChild(e);var f=document.createElement("option");f.value="_self",f.innerHTML="_self",d.appendChild(f);var g=document.createElement("option");g.value="_parent",g.innerHTML="_parent",d.appendChild(g);var h=document.createElement("option");h.value="_top",h.innerHTML="_top",d.appendChild(h),d.id="monkeyInline-link-target";var i=document.createElement("label"),j=document.createTextNode("Link Name:");i.appendChild(j);var k=document.createElement("input");k.type="text",k.id="monkey-inline-insert-link-name-input";var l=document.createElement("label"),m=document.createTextNode("Link:");l.appendChild(m);var n=document.createElement("input");return n.type="text",n.id="monkey-inline-insert-link-input",a.appendChild(b),a.appendChild(d),a.appendChild(i),a.appendChild(k),a.appendChild(l),a.appendChild(n),a})}function underline(){var a=document.getElementById("monkeyInline-underline");a.onclick=function(){document.execCommand("underline")};var b=document.queryCommandState("underline");b===!0?highlightButton(a):unHightlightButton(a)}for(var InlineClassName="monkey-inline",MonkeyInline=function(){function a(){var a=document.createElement("div");a.id=h;var b=document.createElement("ul");a.appendChild(b);for(var c=0;c<tools.length;c++){var d=document.createElement("a");d.id=tools[c].name,d.setAttribute("title",tools[c].description),d.setAttribute("onmousedown","event.preventDefault();");var e=document.createElement("li"),f=create(tools[c].content);b.appendChild(d),d.appendChild(e),e.appendChild(f)}return a}function b(){for(var a=0;a<tools.length;a++)if(void 0!==tools[a].dialog_box){var b=document.createElement("div"),c=tools[a].name+"-dialog";b.id=c,b.className="monkeyDialogBox";var d=tools[a].dialog_box.message;if(void 0!==d){var e=document.createTextNode(d);b.appendChild(e)}var f=document.createElement("div");f.className="monkeyDialogHeader";var g=tools[a].dialog_box.width;void 0!==g&&(b.style.width=g);var h=tools[a].dialog_box.height;void 0!==h&&(b.style.height=h);var i=document.createElement("p"),j=document.createTextNode(tools[a].dialog_box.title);i.appendChild(j),f.appendChild(i);var k=document.createElement("div");k.className="button-container";var l=document.createElement("button");l.id=tools[a].name+"-submit";var m=document.createTextNode("Submit");l.appendChild(m);var n=document.createElement("button");n.id=tools[a].name+"-close";var o=document.createTextNode("Close");n.appendChild(o),b.appendChild(f),k.appendChild(l),k.appendChild(n),b.appendChild(k),document.body.appendChild(b),tools[a].dialog_box.function_name()}}function c(a){a.onclick=function(b){"false"!=a.getAttribute("data-toolbar")&&d(this)}}function d(a){var b=document.getElementById(h);e(a,b),f()}function e(a,b){var c=a.getBoundingClientRect(),d=c.top,e=b.offsetHeight,f=d-e,g=document.documentElement.scrollTop||document.body.scrollTop,h=g+f,i=c.left,j=b.style.left,k=i-j,l=i;if(k>0&&(l=i-k),d>0)b.style.top=h+"px",b.style.left=l+"px",b.style.display="block";else if(0>d){var m=c.bottom;f=m,h=g+f,b.style.top=h+"px",b.style.left=l+"px",b.style.display="block"}}function f(){for(var a=0;a<tools.length;a++)tools[a].function_name()}var g=InlineClassName,h="monkeyContainer";this.run=function(){var d=a();document.body.appendChild(d),b(),createDocumentShadow();for(var e=getClassElement(g),f=0;f<e.length;f++)e[f].setAttribute("contentEditable","true"),c(e[f])}},tools=[{name:"monkeyInline-bold",function_name:bold,content:"<i class='fa fa-bold'></i>",description:"Highlight text you wish to make bold"},{name:"monkeyInline-italic",function_name:italic,content:"<i class='fa fa-italic'></i>",description:"Highlight text you wish to make italic"},{name:"monkeyInline-underline",function_name:underline,content:"<i class='fa fa-underline'></i>",description:"Highlight text you wish to make underline"},{name:"monkeyInline-heading1",function_name:heading1,content:"<i class='fa fa-header'></i>1",description:"Highlight text you wish to make a heading 1"},{name:"monkeyInline-heading2",function_name:heading2,content:"<i class='fa fa-header'></i>2",description:"Highlight text you wish to make a heading 2"},{name:"monkeyInline-heading3",function_name:heading3,content:"<i class='fa fa-header'></i>3",description:"Highlight text you wish to make a heading 3"},{name:"monkeyInline-link",function_name:createLink,content:"<i class='fa fa-link'></i>",description:"Insert link",dialog_box:{function_name:dialogLinkContent,title:"Insert link",message:"Insert the link below to insert it",width:"250px",height:"200px"}},{name:"monkeyInline-image",function_name:insertImage,content:"<i class='fa fa-image'></i>",description:"Insert Image",dialog_box:{function_name:dialogImageContent,title:"Insert Image",message:"Insert an image link below to add it into the body.",width:"300px",height:"360px"}},{name:"monkeyInline-clearFormatting",function_name:clearFormatting,content:"<i class='fa fa-eraser'></i>",description:"Clear formatting"}],selectedInlineClassElement=null,contentEditors=getClassElement(InlineClassName),i=0;i<contentEditors.length;i++)RememberLastEditable(contentEditors[i]);