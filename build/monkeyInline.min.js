function create(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b}function getClassElement(a){var b,c=document.getElementsByTagName("*"),d=[],e=0;for(b in c)(" "+c[b].className+" ").indexOf(" "+a+" ")>-1&&(d[e]=c[b],e++);return d}function insertAfter(a,b){b.parentNode.insertBefore(a,b.nextSibling)}function highlightButton(a){var b=a.getElementsByTagName("li")[0];b.className="used"}function unHightlightButton(a){var b=a.getElementsByTagName("li")[0];b.className=""}function fadeIn(a){a.style.opacity=0;var b=+new Date,c=function(){a.style.opacity=+a.style.opacity+(new Date-b)/400,b=+new Date,+a.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}function createDocumentShadow(){var a=document.createElement("div");a.id="monkeyBackground",document.body.appendChild(a)}function openDialogBox(a){for(var b=0;b<tools.length;b++){var c=tools[b].name;if(c==a.id){var d=c+"-dialog";document.getElementById("monkeyBackground").style.display="block",fadeIn(document.getElementById("monkeyBackground")),document.getElementById(d).style.display="block",fadeIn(document.getElementById(d)),showDialogButtonSubmit(a);break}}}function showDialogButtonSubmit(a){var b=a.id+"-submit";document.getElementById(b).style.display="block"}function dialogButtonSubmit(a,b){var c=a.id+"-submit",d=document.getElementById(c);d.onclick=function(){"none"!==d.style.display&&(d.style.display="none",closeDocumentShadow(),closeDialogBox(a),b&&"function"==typeof b&&b())}}function closeDocumentShadow(){document.getElementById("monkeyBackground").style.display="none"}function closeDialogBox(a){var b=a.id+"-dialog";document.getElementById(b).style.display="none"}function dialogContent(a,b){var c,d=a.id+"-dialog",e=document.getElementById(d);b&&"function"==typeof b&&(c=b()),void 0!==c&&e.appendChild(c)}function bold(){var a=document.getElementById("monkeyInline-bold");a.onclick=function(){document.execCommand("bold")};var b=document.queryCommandState("bold");b===!0?highlightButton(a):unHightlightButton(a)}function clearFormatting(){var a=document.getElementById("monkeyInline-clearFormatting");a.onclick=function(){document.execCommand("removeFormat"),document.execCommand("formatBlock",!1,"<p>")}}function heading1(){var a=document.getElementById("monkeyInline-heading1");a.onclick=function(){document.execCommand("formatBlock",!1,"<h1>")}}function heading2(){var a=document.getElementById("monkeyInline-heading2");a.onclick=function(){document.execCommand("formatBlock",!1,"<h2>")}}function heading3(){var a=document.getElementById("monkeyInline-heading3");a.onclick=function(){document.execCommand("formatBlock",!1,"<h3>")}}function italic(){var a=document.getElementById("monkeyInline-italic");a.onclick=function(){document.execCommand("italic")};var b=document.queryCommandState("italic");b===!0?highlightButton(a):unHightlightButton(a)}function createLink(){var a=document.getElementById("monkeyInline-link");a.onclick=function(){openDialogBox(a)},dialogButtonSubmit(a,function(){console.log("something happened")})}function dialogLinkContent(){var a=document.getElementById("monkeyInline-link");dialogContent(a,function(){var a=document.createElement("div"),b=document.createElement("input");return b.type="text",a.appendChild(b),a})}function underline(){var a=document.getElementById("monkeyInline-underline");a.onclick=function(){document.execCommand("underline")};var b=document.queryCommandState("underline");b===!0?highlightButton(a):unHightlightButton(a)}var MonkeyInline=function(){function a(a){a.onclick=function(c){"false"!=a.getAttribute("data-toolbar")&&b(this)}}function b(a){var b=document.getElementById(g);c(a,b),e()}function c(a,b){var c=a.offsetTop,d=c-document.documentElement.scrollTop,e=b.offsetHeight,f=c-e;d>=100?(b.style.top=f+"px",b.style.display="block"):100>d&&(b.style.top=f+"px",b.style.display="block")}function d(){var a=document.createElement("div");a.id=g;var b=document.createElement("ul");a.appendChild(b);for(var c=0;c<tools.length;c++){var d=document.createElement("a");d.id=tools[c].name,d.setAttribute("title",tools[c].description),d.setAttribute("onmousedown","event.preventDefault();");var e=document.createElement("li"),f=create(tools[c].content);b.appendChild(d),d.appendChild(e),e.appendChild(f)}return a}function e(){for(var a=0;a<tools.length;a++)tools[a].function_name()}function f(){for(var a=0;a<tools.length;a++)if(void 0!==tools[a].dialog_box){var b=document.createElement("div"),c=tools[a].name+"-dialog";b.id=c,b.className="monkeyDialogBox";var d=tools[a].dialog_box.message;if(void 0!==d){var e=document.createTextNode(d);b.appendChild(e)}var f=document.createElement("div");f.className="monkeyDialogHeader";var g=tools[a].dialog_box.width;void 0!==g&&(b.style.width=g);var h=tools[a].dialog_box.height;void 0!==h&&(b.style.height=h);var i=document.createElement("p"),j=document.createTextNode(tools[a].dialog_box.title);i.appendChild(j),f.appendChild(i);var k=document.createElement("button");k.id=tools[a].name+"-submit";var l=document.createTextNode("Submit");k.appendChild(l),b.appendChild(f),b.appendChild(k),document.body.appendChild(b),tools[a].dialog_box.function_name()}}this.classname="monkey-inline";var g="monkeyContainer";this.run=function(){var b=d();document.body.appendChild(b),f(),createDocumentShadow();for(var c=getClassElement(this.classname),e=0;e<c.length;e++)c[e].setAttribute("contentEditable","true"),a(c[e])}},tools=[{name:"monkeyInline-bold",function_name:bold,content:"<i class='fa fa-bold'></i>",description:"Highlight text you wish to make bold"},{name:"monkeyInline-italic",function_name:italic,content:"<i class='fa fa-italic'></i>",description:"Highlight text you wish to make italic"},{name:"monkeyInline-underline",function_name:underline,content:"<i class='fa fa-underline'></i>",description:"Highlight text you wish to make underline"},{name:"monkeyInline-heading1",function_name:heading1,content:"<i class='fa fa-header'></i>1",description:"Highlight text you wish to make a heading 1"},{name:"monkeyInline-heading2",function_name:heading2,content:"<i class='fa fa-header'></i>2",description:"Highlight text you wish to make a heading 2"},{name:"monkeyInline-heading3",function_name:heading3,content:"<i class='fa fa-header'></i>3",description:"Highlight text you wish to make a heading 3"},{name:"monkeyInline-link",function_name:createLink,content:"<i class='fa fa-link'></i>",description:"Insert link",dialog_box:{function_name:dialogLinkContent,title:"Insert link",message:"Insert the link below to insert it",width:"250px",height:"200px"}},{name:"monkeyInline-clearFormatting",function_name:clearFormatting,content:"<i class='fa fa-eraser'></i>",description:"Clear formatting"}];